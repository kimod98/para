<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <base href="../" />
    <link rel="stylesheet" href="dmdoc.css" />
    <title>&#x2F;datum&#x2F;antag_scenario - Space Station 13</title>
</head>
<body>
<header>
    <a href="index.html">Space Station 13</a> -
    <a href="index.html#modules">Modules</a> -
    <a href="index.html#types">Types</a>
 &mdash; <a href="datum/antag_scenario.html#var">Var Details</a> - <a href="datum/antag_scenario.html#proc">Proc Details</a></header>
<main>
<h1>antag_scenario <aside>/<a href="datum.html">datum</a>/<a href="datum/antag_scenario.html">antag_scenario</a></aside>
        
    
            <a href="https://github.com/kimod98/para/blob/a796200b31d4574cc2a81a6a19eb417c9fcece42/modular_ss220/antagonists/code/antag_mix/scenarios/antag_scenario.dm#L1">
        <img src="git.png" width="16" height="16" title="modular_ss220&#x2F;antagonists&#x2F;code&#x2F;antag_mix&#x2F;scenarios&#x2F;antag_scenario.dm 1"/></a></h1>

<table class="summary" cellspacing="0"><tr><td colspan="2"><h2>Vars</h2></td></tr>
            <tr><th><a href="datum/antag_scenario.html#var/abstract">abstract</a></th><td>Whether scenario shouldn't be used in <code>Antag Mix</code> and which purpose is to be literally abstract.
Scenario will crash in <code>/datum/antag_scenario/New()</code> if tried to instantiate</td></tr>
            <tr><th><a href="datum/antag_scenario.html#var/antag_cap">antag_cap</a></th><td>Number of player population, based on which the new scenario antag will be scaled.
Can be specified using just number, which will be treated as hard cap, or in linear equation form:
list(&quot;denominator&quot; = 10, &quot;offset&quot; = 1), where 'denominator' is divider for current players population,
and 'offset' is guaranteed amount of antag of scenario's type</td></tr>
            <tr><th><a href="datum/antag_scenario.html#var/antag_datum">antag_datum</a></th><td>Antag datum, that will be granted to chosen players on <code>execute</code> which will be called on post setup</td></tr>
            <tr><th><a href="datum/antag_scenario.html#var/antag_role">antag_role</a></th><td>Role used to check if the player is banned from it. Example: <code>ROLE_TRAITOR</code>, <code>ROLE_CHANGELING</code>, etc.</td></tr>
            <tr><th><a href="datum/antag_scenario.html#var/antag_special_role">antag_special_role</a></th><td>Special role, that will be assigned to chosen players. Example: <code>SPECIAL_ROLE_TRAITOR</code>, <code>SPECIAL_ROLE_CHANGELIN</code>, etc.</td></tr>
            <tr><th><a href="datum/antag_scenario.html#var/assigned">assigned</a></th><td>List of players that were drafted to be antagonists of this scenario</td></tr>
            <tr><th><a href="datum/antag_scenario.html#var/candidates">candidates</a></th><td>List of available candidates for this scenario</td></tr>
            <tr><th><a href="datum/antag_scenario.html#var/candidates_required">candidates_required</a></th><td>How many possible candidates are required for this scenario to be executed</td></tr>
            <tr><th><a href="datum/antag_scenario.html#var/config_tag">config_tag</a></th><td>Configuration tag of scenario, which will be used on scenario configuration loading</td></tr>
            <tr><th><a href="datum/antag_scenario.html#var/cost">cost</a></th><td>Cost of the antag scenario. Antag_mix antag generation is based on this value.
Scenarios with <code>0</code> cost considered free and only limited by <code>max_antag_fraction</code> of <code>/datum/game_mode/antag_mix</code></td></tr>
            <tr><th><a href="datum/antag_scenario.html#var/name">name</a></th><td>Name of the scenario. Will be used in round end statistics</td></tr>
            <tr><th><a href="datum/antag_scenario.html#var/protected_roles">protected_roles</a></th><td>Jobs that can't be chosen for the scenario if 'GLOB.configuration.gamemode.prevent_mindshield_antags' is TRUE</td></tr>
            <tr><th><a href="datum/antag_scenario.html#var/required_players">required_players</a></th><td>Amount of players required to start this scenario</td></tr>
            <tr><th><a href="datum/antag_scenario.html#var/restricted_roles">restricted_roles</a></th><td>Jobs that can't be chosen for the scenario</td></tr>
            <tr><th><a href="datum/antag_scenario.html#var/restricted_species">restricted_species</a></th><td>Species that can't be chosen for the scenario</td></tr>
            <tr><th><a href="datum/antag_scenario.html#var/scaled_times">scaled_times</a></th><td>Amount of times, this scenario has been picked again</td></tr>
            <tr><th><a href="datum/antag_scenario.html#var/weight">weight</a></th><td>Weight of the scenario. Will be taken into consideration by 'antag_mix' gamemode.
Higher values make scenario more frequent, lower - less. Defaults to '1'</td></tr><tr><td colspan="2"><h2>Procs</h2></td></tr>
            <tr><th><a href="datum/antag_scenario.html#proc/acceptable">acceptable</a></th><td>Performs sanity check for this scenario to be run.</td></tr>
            <tr><th><a href="datum/antag_scenario.html#proc/apply_configuration">apply_configuration</a></th><td>Gets configuration params from [GLOB.configuration.antag_mix_gamemode.params_by_scenario],
which are grouped by <code>config_tag</code> property of <code>/datum/antag_scenario</code>.
If <code>config_tag</code> field is <code>null</code> - default scenario
and write them into</td></tr>
            <tr><th><a href="datum/antag_scenario.html#proc/execute">execute</a></th><td>Called in <code>post_setup</code>, which means that all players already have jobs. Here antags should receive everything they need.
Can fail here, but there is nothing we can do on this stage - all players already have their jobs.</td></tr>
            <tr><th><a href="datum/antag_scenario.html#proc/get_antag_cap">get_antag_cap</a></th><td>Gets antag cap per one scenario.</td></tr>
            <tr><th><a href="datum/antag_scenario.html#proc/get_total_antag_cap">get_total_antag_cap</a></th><td>Gets antag cap per this scenario, but taking <code>scaled_times</code> into calculation.</td></tr>
            <tr><th><a href="datum/antag_scenario.html#proc/pre_execute">pre_execute</a></th><td>Called in <code>pre_setup</code> of <a href="datum/game_mode/antag_mix.html" title="/datum/game_mode/antag_mix">/datum/game_mode/antag_mix</a> gamemode. Here antags should be chosen.</td></tr>
            <tr><th><a href="datum/antag_scenario.html#proc/ready">ready</a></th><td>Checks whether this scenario is ready to be applied.</td></tr>
            <tr><th><a href="datum/antag_scenario.html#proc/trim_candidates">trim_candidates</a></th><td>Filter candidates scenario specific requirement vise.</td></tr></table>
    <h2 id="var">Var Details</h2><h3 id="var/abstract"><aside class="declaration">var </aside>abstract
            <aside>&ndash; </aside>
        
    
            <a href="https://github.com/kimod98/para/blob/a796200b31d4574cc2a81a6a19eb417c9fcece42/modular_ss220/antagonists/code/antag_mix/scenarios/antag_scenario.dm#L8">
        <img src="git.png" width="16" height="16" title="modular_ss220&#x2F;antagonists&#x2F;code&#x2F;antag_mix&#x2F;scenarios&#x2F;antag_scenario.dm 8"/></a></h3>
        <p>Whether scenario shouldn't be used in <code>Antag Mix</code> and which purpose is to be literally abstract.
Scenario will crash in <code>/datum/antag_scenario/New()</code> if tried to instantiate</p><h3 id="var/antag_cap"><aside class="declaration">var </aside>antag_cap
            <aside>&ndash; </aside>
        
    
            <a href="https://github.com/kimod98/para/blob/a796200b31d4574cc2a81a6a19eb417c9fcece42/modular_ss220/antagonists/code/antag_mix/scenarios/antag_scenario.dm#L29">
        <img src="git.png" width="16" height="16" title="modular_ss220&#x2F;antagonists&#x2F;code&#x2F;antag_mix&#x2F;scenarios&#x2F;antag_scenario.dm 29"/></a></h3>
        <p>Number of player population, based on which the new scenario antag will be scaled.
Can be specified using just number, which will be treated as hard cap, or in linear equation form:
list(&quot;denominator&quot; = 10, &quot;offset&quot; = 1), where 'denominator' is divider for current players population,
and 'offset' is guaranteed amount of antag of scenario's type</p><h3 id="var/antag_datum"><aside class="declaration">var </aside>antag_datum
            <aside>&ndash; /<a href="datum.html">datum</a>/<a href="datum/antagonist.html">antagonist</a></aside>
        
    
            <a href="https://github.com/kimod98/para/blob/a796200b31d4574cc2a81a6a19eb417c9fcece42/modular_ss220/antagonists/code/antag_mix/scenarios/antag_scenario.dm#L14">
        <img src="git.png" width="16" height="16" title="modular_ss220&#x2F;antagonists&#x2F;code&#x2F;antag_mix&#x2F;scenarios&#x2F;antag_scenario.dm 14"/></a></h3>
        <p>Antag datum, that will be granted to chosen players on <code>execute</code> which will be called on post setup</p><h3 id="var/antag_role"><aside class="declaration">var </aside>antag_role
            <aside>&ndash; </aside>
        
    
            <a href="https://github.com/kimod98/para/blob/a796200b31d4574cc2a81a6a19eb417c9fcece42/modular_ss220/antagonists/code/antag_mix/scenarios/antag_scenario.dm#L10">
        <img src="git.png" width="16" height="16" title="modular_ss220&#x2F;antagonists&#x2F;code&#x2F;antag_mix&#x2F;scenarios&#x2F;antag_scenario.dm 10"/></a></h3>
        <p>Role used to check if the player is banned from it. Example: <code>ROLE_TRAITOR</code>, <code>ROLE_CHANGELING</code>, etc.</p><h3 id="var/antag_special_role"><aside class="declaration">var </aside>antag_special_role
            <aside>&ndash; </aside>
        
    
            <a href="https://github.com/kimod98/para/blob/a796200b31d4574cc2a81a6a19eb417c9fcece42/modular_ss220/antagonists/code/antag_mix/scenarios/antag_scenario.dm#L12">
        <img src="git.png" width="16" height="16" title="modular_ss220&#x2F;antagonists&#x2F;code&#x2F;antag_mix&#x2F;scenarios&#x2F;antag_scenario.dm 12"/></a></h3>
        <p>Special role, that will be assigned to chosen players. Example: <code>SPECIAL_ROLE_TRAITOR</code>, <code>SPECIAL_ROLE_CHANGELIN</code>, etc.</p><h3 id="var/assigned"><aside class="declaration">var </aside>assigned
            <aside>&ndash; /list/datum/mind</aside>
        
    
            <a href="https://github.com/kimod98/para/blob/a796200b31d4574cc2a81a6a19eb417c9fcece42/modular_ss220/antagonists/code/antag_mix/scenarios/antag_scenario.dm#L41">
        <img src="git.png" width="16" height="16" title="modular_ss220&#x2F;antagonists&#x2F;code&#x2F;antag_mix&#x2F;scenarios&#x2F;antag_scenario.dm 41"/></a></h3>
        <p>List of players that were drafted to be antagonists of this scenario</p><h3 id="var/candidates"><aside class="declaration">var </aside>candidates
            <aside>&ndash; /list/mob/new_player</aside>
        
    
            <a href="https://github.com/kimod98/para/blob/a796200b31d4574cc2a81a6a19eb417c9fcece42/modular_ss220/antagonists/code/antag_mix/scenarios/antag_scenario.dm#L39">
        <img src="git.png" width="16" height="16" title="modular_ss220&#x2F;antagonists&#x2F;code&#x2F;antag_mix&#x2F;scenarios&#x2F;antag_scenario.dm 39"/></a></h3>
        <p>List of available candidates for this scenario</p><h3 id="var/candidates_required"><aside class="declaration">var </aside>candidates_required
            <aside>&ndash; </aside>
        
    
            <a href="https://github.com/kimod98/para/blob/a796200b31d4574cc2a81a6a19eb417c9fcece42/modular_ss220/antagonists/code/antag_mix/scenarios/antag_scenario.dm#L31">
        <img src="git.png" width="16" height="16" title="modular_ss220&#x2F;antagonists&#x2F;code&#x2F;antag_mix&#x2F;scenarios&#x2F;antag_scenario.dm 31"/></a></h3>
        <p>How many possible candidates are required for this scenario to be executed</p><h3 id="var/config_tag"><aside class="declaration">var </aside>config_tag
            <aside>&ndash; </aside>
        
    
            <a href="https://github.com/kimod98/para/blob/a796200b31d4574cc2a81a6a19eb417c9fcece42/modular_ss220/antagonists/code/antag_mix/scenarios/antag_scenario.dm#L5">
        <img src="git.png" width="16" height="16" title="modular_ss220&#x2F;antagonists&#x2F;code&#x2F;antag_mix&#x2F;scenarios&#x2F;antag_scenario.dm 5"/></a></h3>
        <p>Configuration tag of scenario, which will be used on scenario configuration loading</p><h3 id="var/cost"><aside class="declaration">var </aside>cost
            <aside>&ndash; </aside>
        
    
            <a href="https://github.com/kimod98/para/blob/a796200b31d4574cc2a81a6a19eb417c9fcece42/modular_ss220/antagonists/code/antag_mix/scenarios/antag_scenario.dm#L21">
        <img src="git.png" width="16" height="16" title="modular_ss220&#x2F;antagonists&#x2F;code&#x2F;antag_mix&#x2F;scenarios&#x2F;antag_scenario.dm 21"/></a></h3>
        <p>Cost of the antag scenario. Antag_mix antag generation is based on this value.
Scenarios with <code>0</code> cost considered free and only limited by <code>max_antag_fraction</code> of <code>/datum/game_mode/antag_mix</code></p><h3 id="var/name"><aside class="declaration">var </aside>name
            <aside>&ndash; </aside>
        
    
            <a href="https://github.com/kimod98/para/blob/a796200b31d4574cc2a81a6a19eb417c9fcece42/modular_ss220/antagonists/code/antag_mix/scenarios/antag_scenario.dm#L3">
        <img src="git.png" width="16" height="16" title="modular_ss220&#x2F;antagonists&#x2F;code&#x2F;antag_mix&#x2F;scenarios&#x2F;antag_scenario.dm 3"/></a></h3>
        <p>Name of the scenario. Will be used in round end statistics</p><h3 id="var/protected_roles"><aside class="declaration">var </aside>protected_roles
            <aside>&ndash; /list</aside>
        
    
            <a href="https://github.com/kimod98/para/blob/a796200b31d4574cc2a81a6a19eb417c9fcece42/modular_ss220/antagonists/code/antag_mix/scenarios/antag_scenario.dm#L35">
        <img src="git.png" width="16" height="16" title="modular_ss220&#x2F;antagonists&#x2F;code&#x2F;antag_mix&#x2F;scenarios&#x2F;antag_scenario.dm 35"/></a></h3>
        <p>Jobs that can't be chosen for the scenario if 'GLOB.configuration.gamemode.prevent_mindshield_antags' is TRUE</p><h3 id="var/required_players"><aside class="declaration">var </aside>required_players
            <aside>&ndash; </aside>
        
    
            <a href="https://github.com/kimod98/para/blob/a796200b31d4574cc2a81a6a19eb417c9fcece42/modular_ss220/antagonists/code/antag_mix/scenarios/antag_scenario.dm#L18">
        <img src="git.png" width="16" height="16" title="modular_ss220&#x2F;antagonists&#x2F;code&#x2F;antag_mix&#x2F;scenarios&#x2F;antag_scenario.dm 18"/></a></h3>
        <p>Amount of players required to start this scenario</p><h3 id="var/restricted_roles"><aside class="declaration">var </aside>restricted_roles
            <aside>&ndash; /list</aside>
        
    
            <a href="https://github.com/kimod98/para/blob/a796200b31d4574cc2a81a6a19eb417c9fcece42/modular_ss220/antagonists/code/antag_mix/scenarios/antag_scenario.dm#L33">
        <img src="git.png" width="16" height="16" title="modular_ss220&#x2F;antagonists&#x2F;code&#x2F;antag_mix&#x2F;scenarios&#x2F;antag_scenario.dm 33"/></a></h3>
        <p>Jobs that can't be chosen for the scenario</p><h3 id="var/restricted_species"><aside class="declaration">var </aside>restricted_species
            <aside>&ndash; /list</aside>
        
    
            <a href="https://github.com/kimod98/para/blob/a796200b31d4574cc2a81a6a19eb417c9fcece42/modular_ss220/antagonists/code/antag_mix/scenarios/antag_scenario.dm#L37">
        <img src="git.png" width="16" height="16" title="modular_ss220&#x2F;antagonists&#x2F;code&#x2F;antag_mix&#x2F;scenarios&#x2F;antag_scenario.dm 37"/></a></h3>
        <p>Species that can't be chosen for the scenario</p><h3 id="var/scaled_times"><aside class="declaration">var </aside>scaled_times
            <aside>&ndash; </aside>
        
    
            <a href="https://github.com/kimod98/para/blob/a796200b31d4574cc2a81a6a19eb417c9fcece42/modular_ss220/antagonists/code/antag_mix/scenarios/antag_scenario.dm#L16">
        <img src="git.png" width="16" height="16" title="modular_ss220&#x2F;antagonists&#x2F;code&#x2F;antag_mix&#x2F;scenarios&#x2F;antag_scenario.dm 16"/></a></h3>
        <p>Amount of times, this scenario has been picked again</p><h3 id="var/weight"><aside class="declaration">var </aside>weight
            <aside>&ndash; </aside>
        
    
            <a href="https://github.com/kimod98/para/blob/a796200b31d4574cc2a81a6a19eb417c9fcece42/modular_ss220/antagonists/code/antag_mix/scenarios/antag_scenario.dm#L24">
        <img src="git.png" width="16" height="16" title="modular_ss220&#x2F;antagonists&#x2F;code&#x2F;antag_mix&#x2F;scenarios&#x2F;antag_scenario.dm 24"/></a></h3>
        <p>Weight of the scenario. Will be taken into consideration by 'antag_mix' gamemode.
Higher values make scenario more frequent, lower - less. Defaults to '1'</p><h2 id="proc">Proc Details</h2><h3 id="proc/acceptable"><aside class="declaration">proc </aside>acceptable<aside>(population) 
        
    
            <a href="https://github.com/kimod98/para/blob/a796200b31d4574cc2a81a6a19eb417c9fcece42/modular_ss220/antagonists/code/antag_mix/scenarios/antag_scenario.dm#L83">
        <img src="git.png" width="16" height="16" title="modular_ss220&#x2F;antagonists&#x2F;code&#x2F;antag_mix&#x2F;scenarios&#x2F;antag_scenario.dm 83"/></a></aside>
        </h3>
        <p>Performs sanity check for this scenario to be run.</p>
<p>Returns: 'TRUE' if scenario is matching current situation (game has enough players, enough antags can be spawned).
'FALSE' returned otherwise.</p><h3 id="proc/apply_configuration"><aside class="declaration">proc </aside>apply_configuration<aside>() 
        
    
            <a href="https://github.com/kimod98/para/blob/a796200b31d4574cc2a81a6a19eb417c9fcece42/modular_ss220/antagonists/code/antag_mix/scenarios/antag_scenario.dm#L57">
        <img src="git.png" width="16" height="16" title="modular_ss220&#x2F;antagonists&#x2F;code&#x2F;antag_mix&#x2F;scenarios&#x2F;antag_scenario.dm 57"/></a></aside>
        </h3>
        <p>Gets configuration params from [GLOB.configuration.antag_mix_gamemode.params_by_scenario],
which are grouped by <code>config_tag</code> property of <code>/datum/antag_scenario</code>.
If <code>config_tag</code> field is <code>null</code> - default scenario
and write them into</p><h3 id="proc/execute"><aside class="declaration">proc </aside>execute<aside>() 
        
    
            <a href="https://github.com/kimod98/para/blob/a796200b31d4574cc2a81a6a19eb417c9fcece42/modular_ss220/antagonists/code/antag_mix/scenarios/antag_scenario.dm#L127">
        <img src="git.png" width="16" height="16" title="modular_ss220&#x2F;antagonists&#x2F;code&#x2F;antag_mix&#x2F;scenarios&#x2F;antag_scenario.dm 127"/></a></aside>
        </h3>
        <p>Called in <code>post_setup</code>, which means that all players already have jobs. Here antags should receive everything they need.
Can fail here, but there is nothing we can do on this stage - all players already have their jobs.</p><h3 id="proc/get_antag_cap"><aside class="declaration">proc </aside>get_antag_cap<aside>(population) 
        
    
            <a href="https://github.com/kimod98/para/blob/a796200b31d4574cc2a81a6a19eb417c9fcece42/modular_ss220/antagonists/code/antag_mix/scenarios/antag_scenario.dm#L136">
        <img src="git.png" width="16" height="16" title="modular_ss220&#x2F;antagonists&#x2F;code&#x2F;antag_mix&#x2F;scenarios&#x2F;antag_scenario.dm 136"/></a></aside>
        </h3>
        <p>Gets antag cap per one scenario.</p><h3 id="proc/get_total_antag_cap"><aside class="declaration">proc </aside>get_total_antag_cap<aside>(population) 
        
    
            <a href="https://github.com/kimod98/para/blob/a796200b31d4574cc2a81a6a19eb417c9fcece42/modular_ss220/antagonists/code/antag_mix/scenarios/antag_scenario.dm#L145">
        <img src="git.png" width="16" height="16" title="modular_ss220&#x2F;antagonists&#x2F;code&#x2F;antag_mix&#x2F;scenarios&#x2F;antag_scenario.dm 145"/></a></aside>
        </h3>
        <p>Gets antag cap per this scenario, but taking <code>scaled_times</code> into calculation.</p><h3 id="proc/pre_execute"><aside class="declaration">proc </aside>pre_execute<aside>(population) 
        
    
            <a href="https://github.com/kimod98/para/blob/a796200b31d4574cc2a81a6a19eb417c9fcece42/modular_ss220/antagonists/code/antag_mix/scenarios/antag_scenario.dm#L101">
        <img src="git.png" width="16" height="16" title="modular_ss220&#x2F;antagonists&#x2F;code&#x2F;antag_mix&#x2F;scenarios&#x2F;antag_scenario.dm 101"/></a></aside>
        </h3>
        <p>Called in <code>pre_setup</code> of <a href="datum/game_mode/antag_mix.html" title="/datum/game_mode/antag_mix">/datum/game_mode/antag_mix</a> gamemode. Here antags should be chosen.</p>
<p>Returns: 'TRUE' if successfully executed, for example antags successfully chosen, 'FALSE' otherwise.</p><h3 id="proc/ready"><aside class="declaration">proc </aside>ready<aside>() 
        
    
            <a href="https://github.com/kimod98/para/blob/a796200b31d4574cc2a81a6a19eb417c9fcece42/modular_ss220/antagonists/code/antag_mix/scenarios/antag_scenario.dm#L92">
        <img src="git.png" width="16" height="16" title="modular_ss220&#x2F;antagonists&#x2F;code&#x2F;antag_mix&#x2F;scenarios&#x2F;antag_scenario.dm 92"/></a></aside>
        </h3>
        <p>Checks whether this scenario is ready to be applied.</p>
<p>Returns: 'TRUE' if all requirements are met for this scenario to be executed, 'FALSE' otherwise</p><h3 id="proc/trim_candidates"><aside class="declaration">proc </aside>trim_candidates<aside>() 
        
    
            <a href="https://github.com/kimod98/para/blob/a796200b31d4574cc2a81a6a19eb417c9fcece42/modular_ss220/antagonists/code/antag_mix/scenarios/antag_scenario.dm#L151">
        <img src="git.png" width="16" height="16" title="modular_ss220&#x2F;antagonists&#x2F;code&#x2F;antag_mix&#x2F;scenarios&#x2F;antag_scenario.dm 151"/></a></aside>
        </h3>
        <p>Filter candidates scenario specific requirement vise.</p></main>
<footer>
    paradise.dme
    <a href="https://github.com/kimod98/para/tree/a796200b31d4574cc2a81a6a19eb417c9fcece42">a796200</a>
        (master) &mdash; <a href="https://github.com/SpaceManiac/SpacemanDMM/blob/master/crates/dmdoc/README.md">dmdoc 1.8.0</a></footer>
</body>
</html>
